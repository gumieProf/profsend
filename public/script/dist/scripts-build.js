!function(){"use strict";$((function(){$("#prof").hide();var t,e,l,a,n=document.getElementById("prof"),o=n.getContext("2d"),c=$(".BGcolor").val(),r=$(".TEXTcolor").val(),d=document.getElementById("file");function s(){if(localStorage.getItem("profData"))var t=localStorage.getItem("profData");else pic=saveImage("/image/img-1.png"),c="#999",$(".BGcolor").val(pic),r="#000000",$(".TEXTcolor").val(r);if(localStorage.getItem("profImg")&&localStorage.getItem("profImg"),t){var e=JSON.parse(t),l=new Function("data.title"+i)(),a=new Function("data.value"+i)();new Function("newObj.title"+i)(),new Function("newObj.value"+i)(),$(".editList").empty();for(let t=1;t<=e.length;t++){$(".editList").append('<li class="editText'+t+'"></li>');var n=$(".editText"+t).append('<input type="text" class="title'+t+'"/>');$(".editText"+t).append('<a href="#" class="deleteBtn"><i class="far fa-times-circle"></i></a>');var o=$(".editText"+t).append('<input type="text" class="value'+t+'"/>');n.val(l),o.val(a)}if($(".switch__label").prop("checked")){for(let t=1;t<=e.length;t++)$(".editText"+t)&&($("title"+t).val(),$("value"+t).val());localStorage.setItem("profdata",{})}}}!0!==localStorage.getItem("autosync")&&null!==localStorage.getItem("autosync")||($(".switch__label").prop("checked",!0),localStorage.setItem("autosync",!0)),setTimeout((function(){$("#background-pic").hide(),$("#scanFile").hide(),$(".datas").hide(),$("#data1Btn,.subData1").click((function(){return $(".datas").hide(),$("#data1").fadeIn(),$(".dataBtn").hide(),!1})),$("#data2Btn,.subData2").click((function(){return $(".datas").hide(),$("#data2").fadeIn(),$(".dataBtn").hide(),!1})),$("#data3Btn,.subData3").click((function(){return $(".datas").hide(),$("#data3").fadeIn(),$(".dataBtn").hide(),!1})),$(".back").click((function(){return $(".datas").hide(),$(".dataBtn").show(),!1})),$(".envls").click((function(){var l=$(this).find("img"),a=l.attr("width"),n=l.attr("width"),o=l.attr("src");return pic=o,t=n,e=a,i(),function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0);var l=e.toDataURL("image/png");localStorage.setItem("profImg",l)}(o),!1})),(new Image).src=""+pic;var i=function(){c=$(".BGColor").val(),r=$(".textColor").val(),s(),setTimeout((function(){for(let t=1;t<=$(".editlist li").length;t++)if($("editText"+t))if($(".editlist li").length>5){var i=$(".editlist li").length/2;1===t||t===i?l.concat($(".title"+t).val()+"\t"+$(".value"+t).val()):t<=i&&t===i?a.concat($(".title"+t).val()+"\t"+$(".value"+t).val()):a.concat("\n"+$(".title"+t).val()+"\t"+$(".value"+t).val())}else 1===t?l.concat($(".title"+t).val()+"\t"+$(".value"+t).val()):($(".editlist li").length,l.concat("\n"+$(".title"+t).val()+"\t"+$(".value"+t).val()));o.clearRect(0,0,n.width+100,n.height+100),o.beginPath(),o.fillStyle=""+c,o.fillRect(0,0,n.width+100,n.height+100),o.fillStyle=""+r,o.rect(15,15,n.width-30,n.height-30),o.lineWidth=8,o.strokeStyle=r,o.stroke();var d;o.font="bold 50px boku2";for(var s=0,h=(d=String(l).split("\n")).length;h>s;s++){var g=d[s],v=100;s&&(v+=50*s),o.fillText(g,50,50+v),(u=new Image).src=""+pic,o.drawImage(u,n.width-150,n.height-150,e,t)}for(s=0,h=(d=String(a).split("\n")).length;h>s;s++){var u;g=d[s],v=100,s&&(v+=50*s),o.fillText(g,50,50+v),(u=new Image).src=""+pic,o.drawImage(u,n.width-150,n.height-150,e,t)}document.getElementById("preview").src=n.toDataURL()}),50)};window.i=i,o.fillStyle=""+c,o.fillRect(0,0,450,300),o.fillStyle=""+r,o.rect(15,15,370,170),o.lineWidth=8,o.stroke(),$("#name").val(),$("#id").val(),$("#age").val(),$("#coment").val(),$("#snsText").val(),i(),$(".profelem,#coment").on({keydown:i,chenge:i}),$(document).on({keydown:i,chenge:i},".profelem,#coment"),$(".BGcolorBtn").click((function(){return $(".BGcolor").val($(this).attr("value")),!1})),$(".TextColorBtn").click((function(){return $(".textColor").val($(this).attr("value")),!1})),$(".BGcolor").change((function(){c=$(this).val(),i()})),$(".textColor").change((function(){r=$(this).val(),i()})),i()})),d.addEventListener("change",(function(t){var e=d.target.files[0];if(e.type.match("image.*")){var l=new FileReader;l.onload=function(){pic=saveImage(l.result),i()},l.readAsDataURL(e)}else alert("画像を選択してください")})),$("#cookieClear").click((function(){return localStorage.setItem("profdata",null),localStorage.setItem("profImg",null),!1})),$(".addBtn").click((function(){if(10===$(".editlist > li").length)alert("これ以上 行を追加できません");else{var t=$(".editlist > li").length()+1,e='<li class="editText'+t+'"><input type="text" class="title'+t+'" value="名前" /><ahref="#"class="deleteBtn"><input type="text" class="value'+t+'" /><iclass="far fa-times-circle"></i></a></li>';$(".editlist").append(e)}return!1})),$(".deleteBtn").click((function(){if(1!==$(".editlist > li").length){var t=$("this").attr("class");$(this).parent().parent().find("."+t).remove();for(let t=1;t<=$(".editlist li").length;t++){var e=$(".editlist li")[t].attr("class");$(".editlist li")[t].removeClass(e),$(".editlist li")[t].addClass("editText"+t)}return!1}alert("行が無くなるため削除できません")}))})),$((function(){$("#download").click((function(){var t=$("#name").val();if($("#name, #id, #age, #coment").on("keyup",(function(){$("#name").val()})),null==t||""==t)alert("名前が抜けています。");else{let t=document.getElementById("prof"),e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="prof.png",e.click()}return!1})),$("#windl").click((function(){var t=document.createElement("canvas");return t.width=1920,t.height=1080,setTimeout((()=>{var e=$("#id").val(),l=$("#age").val(),a=$("#coment").val(),n=$("#snsText").val(),i=$("#name").val(),o=t,c=o.getContext("2d"),r=document.getElementById("file"),d=$("#colors").val(),s=$("#textColor").val(),h=null==a||void 0===a||""==a,g=null==n||void 0===n||""==n,v=null==l||void 0===l||""==l;r=h&&g&&v?"NAME:\t"+i+"\nID: \t"+e:h&&g?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l:v&&g?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+l:v&&h?"NAME:\t"+i+"\nID: \t"+e+"\nSNS: \t"+n:v?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+a+"\nSNS: \t"+n:h?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nSNS: \t"+n:g?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a:"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a+"\nSNS: \t"+n,c.clearRect(0,0,o.width+100,o.height+100),c.beginPath(),c.fillStyle=""+d,c.fillRect(0,0,o.width+100,o.height+100),c.fillStyle=""+s,c.rect(15,15,o.width-30,o.height-30),c.lineWidth=8,c.stroke(),c.strokeStyle=s,c.font="bold 50px Noto Sans JP";for(var u=r.split("\n"),f=0,m=u.length;m>f;f++){var p=u[f],I=50;f&&(I+=75*f),c.fillText(p,30,30+I);var w=new Image;w.src=""+pic,c.drawImage(w,o.width-50,o.height-50,30,30)}let E=document.createElement("a");E.href=o.toDataURL("image/png"),E.download="prof-window.png",E.click()}),50),!1})),$("#smtdl").click((function(){var t=document.createElement("canvas");return t.width=1080,t.height=1920,setTimeout((()=>{var e=$("#id").val(),l=$("#age").val(),a=$("#coment").val(),n=$("#snsText").val(),i=$("#name").val(),o=t,c=o.getContext("2d"),r=document.getElementById("file"),d=$("#colors").val(),s=$("#textColor").val(),h=null==a||void 0===a||""==a,g=null==n||void 0===n||""==n,v=null==l||void 0===l||""==l;r=h&&g&&v?"NAME:\t"+i+"\nID: \t"+e:h&&g?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l:v&&g?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+l:v&&h?"NAME:\t"+i+"\nID: \t"+e+"\nSNS: \t"+n:v?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+a+"\nSNS: \t"+n:h?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nSNS: \t"+n:g?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a:"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a+"\nSNS: \t"+n,c.clearRect(0,0,o.width+100,o.height+100),c.beginPath(),c.fillStyle=""+d,c.fillRect(0,0,o.width+100,o.height+100),c.fillStyle=""+s,c.rect(15,15,o.width-30,o.height-30),c.lineWidth=8,c.strokeStyle=s,c.stroke(),c.font="bold 45px Noto Sans JP";for(var u=r.split("\n"),f=0,m=u.length;m>f;f++){var p=u[f],I=45;f&&(I+=67.5*f),c.fillText(p,30,30+I);var w=new Image;w.src=""+pic,c.drawImage(w,o.width-50,o.height-50,30,30)}let E=document.createElement("a");E.href=o.toDataURL("image/png"),E.download="prof-smart.png",E.click()}),50),!1}))}))}();