!function(){"use strict";$((function(){function t(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0);var l=e.toDataURL("image/png");return localStorage.setItem("profImg",l),l}$("#prof").hide();var e,l,a,n,o=document.getElementById("prof"),c=o.getContext("2d"),r=$(".BGcolor").val(),d=$(".TEXTcolor").val(),s=document.getElementById("file");function h(){if(localStorage.getItem("profData"))var t=localStorage.getItem("profData");else $(".defaultEnvl").click(),r="#999",$(".BGcolor").val(r),d="#000000",$(".TEXTcolor").val(d);if(localStorage.getItem("profImg")&&(pic=localStorage.getItem("profImg")),t){var e=JSON.parse(t),l=new Function("data.title"+i)(),a=new Function("data.value"+i)();new Function("newObj.title"+i)(),new Function("newObj.value"+i)(),$(".editList").empty();for(let t=1;t<=e.length;t++){$(".editList").append('<li class="editText'+t+'"></li>');var n=$(".editText"+t).append('<input type="text" class="title'+t+'"/>');$(".editText"+t).append('<a href="#" class="deleteBtn"><i class="far fa-times-circle"></i></a>');var o=$(".editText"+t).append('<input type="text" class="value'+t+'"/>');n.val(l),o.val(a)}if($(".switch__label").prop("checked")){for(let t=1;t<=e.length;t++)$(".editText"+t)&&($("title"+t).val(),$("value"+t).val());localStorage.setItem("profdata",{})}}}!0!==localStorage.getItem("autosync")&&null!==localStorage.getItem("autosync")||($(".switch__label").prop("checked",!0),localStorage.setItem("autosync",!0)),setTimeout((function(){$("#background-pic").hide(),$("#scanFile").hide(),$(".datas").hide(),$("#data1Btn,.subData1").click((function(){return $(".datas").hide(),$("#data1").fadeIn(),$(".dataBtn").hide(),!1})),$("#data2Btn,.subData2").click((function(){return $(".datas").hide(),$("#data2").fadeIn(),$(".dataBtn").hide(),!1})),$("#data3Btn,.subData3").click((function(){return $(".datas").hide(),$("#data3").fadeIn(),$(".dataBtn").hide(),!1})),$(".back").click((function(){return $(".datas").hide(),$(".dataBtn").show(),!1})),$(".envls").click((function(){var a=$(this).find("img"),n=a.attr("width"),o=a.attr("width"),c=a.attr("src");return pic=c,e=o,l=n,i(),pic=t(c),!1})),(new Image).src=""+pic;var i=function(){r=$(".BGColor").val(),d=$(".textColor").val(),h(),setTimeout((function(){for(let e=1;e<=$(".editlist li").length;e++)if($("editText"+e))if($(".editlist li").length>5){var t=$(".editlist li").length/2;1===e||e===t?a.concat($(".title"+e).val()+"\t"+$(".value"+e).val()):e<=t&&e===t?n.concat($(".title"+e).val()+"\t"+$(".value"+e).val()):n.concat("\n"+$(".title"+e).val()+"\t"+$(".value"+e).val())}else 1===e?a.concat($(".title"+e).val()+"\t"+$(".value"+e).val()):($(".editlist li").length,a.concat("\n"+$(".title"+e).val()+"\t"+$(".value"+e).val()));c.clearRect(0,0,o.width+100,o.height+100),c.beginPath(),c.fillStyle=""+r,c.fillRect(0,0,o.width+100,o.height+100),c.fillStyle=""+d,c.rect(15,15,o.width-30,o.height-30),c.lineWidth=8,c.strokeStyle=d,c.stroke();var i;c.font="bold 50px boku2";for(var s=0,h=(i=String(a).split("\n")).length;h>s;s++){var v=i[s],u=100;s&&(u+=50*s),c.fillText(v,50,50+u)}for(s=0,h=(i=String(n).split("\n")).length;h>s;s++)v=i[s],u=100,s&&(u+=50*s),c.fillText(v,50,50+u);var g=new Image;g.src=""+pic,c.drawImage(g,o.width-150,o.height-150,l,e),document.getElementById("preview").src=o.toDataURL()}),50)};window.i=i,c.fillStyle=""+r,c.fillRect(0,0,450,300),c.fillStyle=""+d,c.rect(15,15,370,170),c.lineWidth=8,c.stroke(),$("#name").val(),$("#id").val(),$("#age").val(),$("#coment").val(),$("#snsText").val(),i(),$(".profelem,#coment").on({keydown:i,chenge:i}),$(document).on({keydown:i,chenge:i},".profelem,#coment"),$(".BGcolorBtn").click((function(){return $(".BGcolor").val($(this).attr("value")),!1})),$(".TextColorBtn").click((function(){return $(".textColor").val($(this).attr("value")),!1})),$(".BGcolor").change((function(){r=$(this).val(),i()})),$(".textColor").change((function(){d=$(this).val(),i()})),i()})),s.addEventListener("change",(function(e){var l=s.target.files[0];if(l.type.match("image.*")){var a=new FileReader;a.onload=function(){pic=t(a.result),i()},a.readAsDataURL(l)}else alert("画像を選択してください")})),$("#cookieClear").click((function(){return localStorage.setItem("profdata",null),localStorage.setItem("profImg",null),!1})),$(".addBtn").click((function(){if(10===$(".editlist > li").length)alert("これ以上 行を追加できません");else{var t=$(".editlist > li").length()+1,e='<li class="editText'+t+'"><input type="text" class="title'+t+'" value="名前" /><ahref="#"class="deleteBtn"><input type="text" class="value'+t+'" /><iclass="far fa-times-circle"></i></a></li>';$(".editlist").append(e)}return!1})),$(".deleteBtn").click((function(){if(1!==$(".editlist > li").length){var t=$("this").attr("class");$(this).parent().parent().find("."+t).remove();for(let t=1;t<=$(".editlist li").length;t++){var e=$(".editlist li")[t].attr("class");$(".editlist li")[t].removeClass(e),$(".editlist li")[t].addClass("editText"+t)}return!1}alert("行が無くなるため削除できません")}))})),$((function(){$("#download").click((function(){var t=$("#name").val();if($("#name, #id, #age, #coment").on("keyup",(function(){$("#name").val()})),null==t||""==t)alert("名前が抜けています。");else{let t=document.getElementById("prof"),e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="prof.png",e.click()}return!1})),$("#windl").click((function(){var t=document.createElement("canvas");return t.width=1920,t.height=1080,setTimeout((()=>{var e=$("#id").val(),l=$("#age").val(),a=$("#coment").val(),n=$("#snsText").val(),i=$("#name").val(),o=t,c=o.getContext("2d"),r=document.getElementById("file"),d=$("#colors").val(),s=$("#textColor").val(),h=null==a||void 0===a||""==a,v=null==n||void 0===n||""==n,u=null==l||void 0===l||""==l;r=h&&v&&u?"NAME:\t"+i+"\nID: \t"+e:h&&v?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l:u&&v?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+l:u&&h?"NAME:\t"+i+"\nID: \t"+e+"\nSNS: \t"+n:u?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+a+"\nSNS: \t"+n:h?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nSNS: \t"+n:v?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a:"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a+"\nSNS: \t"+n,c.clearRect(0,0,o.width+100,o.height+100),c.beginPath(),c.fillStyle=""+d,c.fillRect(0,0,o.width+100,o.height+100),c.fillStyle=""+s,c.rect(15,15,o.width-30,o.height-30),c.lineWidth=8,c.stroke(),c.strokeStyle=s,c.font="bold 50px Noto Sans JP";for(var g=r.split("\n"),f=0,m=g.length;m>f;f++){var p=g[f],w=50;f&&(w+=75*f),c.fillText(p,30,30+w);var E=new Image;E.src=""+pic,c.drawImage(E,o.width-50,o.height-50,30,30)}let I=document.createElement("a");I.href=o.toDataURL("image/png"),I.download="prof-window.png",I.click()}),50),!1})),$("#smtdl").click((function(){var t=document.createElement("canvas");return t.width=1080,t.height=1920,setTimeout((()=>{var e=$("#id").val(),l=$("#age").val(),a=$("#coment").val(),n=$("#snsText").val(),i=$("#name").val(),o=t,c=o.getContext("2d"),r=document.getElementById("file"),d=$("#colors").val(),s=$("#textColor").val(),h=null==a||void 0===a||""==a,v=null==n||void 0===n||""==n,u=null==l||void 0===l||""==l;r=h&&v&&u?"NAME:\t"+i+"\nID: \t"+e:h&&v?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l:u&&v?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+l:u&&h?"NAME:\t"+i+"\nID: \t"+e+"\nSNS: \t"+n:u?"NAME:\t"+i+"\nID: \t"+e+"\nCOMMENT: \t"+a+"\nSNS: \t"+n:h?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nSNS: \t"+n:v?"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a:"NAME:\t"+i+"\nID: \t"+e+"\n AGE: \t"+l+"\nCOMMENT: \t"+a+"\nSNS: \t"+n,c.clearRect(0,0,o.width+100,o.height+100),c.beginPath(),c.fillStyle=""+d,c.fillRect(0,0,o.width+100,o.height+100),c.fillStyle=""+s,c.rect(15,15,o.width-30,o.height-30),c.lineWidth=8,c.strokeStyle=s,c.stroke(),c.font="bold 45px Noto Sans JP";for(var g=r.split("\n"),f=0,m=g.length;m>f;f++){var p=g[f],w=45;f&&(w+=67.5*f),c.fillText(p,30,30+w);var E=new Image;E.src=""+pic,c.drawImage(E,o.width-50,o.height-50,30,30)}let I=document.createElement("a");I.href=o.toDataURL("image/png"),I.download="prof-smart.png",I.click()}),50),!1}))}))}();