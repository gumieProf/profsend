(()=>{"use strict";$((function(){!function(){if(localStorage.getItem("id")){var e=localStorage.getItem("id");$("#id").val(e)}if(localStorage.getItem("name")){var t=localStorage.getItem("name");$("#name").val(t)}if(localStorage.getItem("age")){var n=localStorage.getItem("age");$("#age").val(n)}if(localStorage.getItem("coment")){var a=localStorage.getItem("coment");$("#coment").val(a)}if(localStorage.getItem("sns")){var l=localStorage.getItem("sns");$("#sns").val(l)}}(),$("#prof").hide();var e,t=document.getElementById("prof"),n=document.getElementById("preview"),a=document.getElementById("SMTprof"),l=document.getElementById("SMTpreview"),o=($("#id").val(),$("#age").val(),$("#coment").val(),$("#snsText").val(),$("#name").val(),"/image/img-1.png"),i="#999",r="#000000",c=!1,d=!1;setTimeout((function(){$("#scanFile").hide(),$(".datas").hide(),$("#cropFile1").hide(),$("#colorInputDiv").hide(),$("#textInputDiv").hide(),$(".crop1").hide(),$("#qrValue").hide(),$("#SMTprof").hide(),$("#SMTpreview").hide(),$(".delete1").click((function(){return $("#name").val(""),s(),!1})),$(".delete2").click((function(){return $("#id").val(""),s(),!1})),$(".delete3").click((function(){return $("#coment").val(""),s(),!1})),$("#data1Btn,.subData1").click((function(){return $(".datas").hide(),$("#data1").fadeIn(),$(".dataBtn").hide(),!1})),$("#data2Btn,.subData2").click((function(){return $(".datas").hide(),$("#data2").fadeIn(),$(".dataBtn").hide(),!1})),$("#data3Btn,.subData3").click((function(){return $(".datas").hide(),$("#data3").fadeIn(),$(".dataBtn").hide(),!1})),$("#data4Btn,.subData4").click((function(){return $(".datas").hide(),$("#data4").fadeIn(),$(".dataBtn").hide(),!1})),$(".back").click((function(){return $(".datas").hide(),$(".dataBtn").show(),!1})),$(".envls").click((function(){var e=$(this).find("img").attr("src");return o=e,s(),!1}));var m=document.getElementById("file");function u(e){if(e.length>30){var t=e.substr(0,10)+"\n",n=e.substr(10,20)+"\n";return e.substr(20,30),t+n+e.substr(30,e.length)}return e.length>20?(t=e.substr(0,10)+"\n")+(n=e.substr(10,20)+"\n")+e.substr(20,e.length):e.length>=10?(t=e.substr(0,10)+"\n")+(n=e.substr(10,e.length)):e}var s=function(){setTimeout((function(){var e=u($("#id").val()),c=u($("#age").val()),d=u($("#coment").val()),m=u($("#snsText").val()),s=u($("#name").val()),g=null==d||void 0===d||""==d,f=null==m||void 0===m||""==m,v=null==c||void 0===c||""==c;if(g&&f&&v)var p="NAME:\t"+s+"\nID: \t"+e;else p=g&&f?"NAME:\t"+s+"\nID: \t"+e+"\n AGE: \t"+c:v&&f?"NAME:\t"+s+"\nID: \t"+e+"\nCOMMENT: \t"+d:v&&g?"NAME:\t"+s+"\nID: \t"+e+"\nSNS: \t"+m:v?"NAME:\t"+s+"\nID: \t"+e+"\nCOMMENT: \t"+d+"\nSNS: \t"+m:g?"NAME:\t"+s+"\nID: \t"+e+"\n AGE: \t"+c+"\nSNS: \t"+m:f?"NAME:\t"+s+"\nID: \t"+e+"\n AGE: \t"+c+"\nCOMMENT: \t"+d:"NAME:\t"+s+"\nID: \t"+e+"\n AGE: \t"+c+"\nCOMMENT: \t"+d+"\nSNS: \t"+m;function h(e,t){var n=e.height,a=e.width,l=e.getContext("2d");if(l.clearRect(0,0,a+100,n+100),l.beginPath(),l.fillStyle=""+i,l.fillRect(0,0,a+100,n+100),l.fillStyle=""+r,l.rect(15,15,a-30,n-30),l.lineWidth=8,l.strokeStyle=r,l.stroke(),"default"===t)var c="50px",d=100,m=.5;else"smt"===t&&(c="25px",d=100,m=.5);l.font="bold "+c+" Boku2";for(var u=p.split("\n"),s=0,g=u.length;g>s;s++){var $=u[s],f=d;s&&(f+=d*m*s),l.fillText($,50,50+f);var v=new Image;v.src=""+o;var h=v.height,I=v.width}"/image/img-1.png"===o?"default"===t?l.drawImage(v,a-250,n-250,1.5*I,1.5*h):"smt"===t&&l.drawImage(v,a/3,n/1.5,2*I,2*h):"/image/prof.png"===o?"default"===t?l.drawImage(v,a-300,n-250,I,h):"smt"===t&&l.drawImage(v,a/8,n/1.5,1.5*I,1.5*h):"default"===t?l.drawImage(v,a-250,n-250,I/2,h/2):"smt"===t&&l.drawImage(v,a/3,n/1.5,I/1.5,h/1.5)}h(t,"default"),h(a,"smt"),n.src=t.toDataURL(),l.src=a.toDataURL(),localStorage.setItem("id",$("#id").val()),localStorage.setItem("name",$("#name").val()),localStorage.setItem("age",$("#age").val()),localStorage.setItem("coment",$("#coment").val()),localStorage.setItem("sns",$("#snsText").val())}),50)};$(".EMBreset").click((function(){return o="/image/img-1.png",s(),!1})),$(".EMBhide").click((function(){return o="",s(),!1})),window.i=s,$("#name").val(),$("#id").val(),$("#age").val(),$("#coment").val(),$("#snsText").val(),s(),$(".profelem,#coment").on({keydown:s,chenge:s}),$(document).on({keydown:s,chenge:s},".profelem,#coment"),$("#colors").change((function(){"input"===$(this).val()?($("#colorInputDiv").fadeIn(100),d=!0):"img"===$(this).val()?$("#cropFile1").click():((d=!0)&&($("#colorInputDiv").fadeIn(100),d=!1,$("#colorInput").click()),i=$(this).val()),s()})),$("#textColor").change((function(){"input"===$(this).val()?($("#textInputDiv").fadeIn(100),c=!0):((c=!0)&&(c=!1),r=$(this).val()),s()})),$("#colorInput").change((function(){!0===d&&(i=$(this).val()),s()})),$("#textInput").change((function(){!0===c&&(r=$(this).val()),s()})),$(".qrBtn").click((function(){var e=$("#qrURL").val();return $("#qrValue").empty(),new QRCode("qrValue",{text:e,width:200,height:200,correctLevel:QRCode.CorrectLevel.H}),$("#qrValue").find("img").on("load",(function(){o=$(this).attr("src"),s()})),!1})),m.addEventListener("change",(function(e){var t=e.target.files[0];if(t.type.match("image.*")){var n=new FileReader;n.onload=function(){o=n.result,s()},n.readAsDataURL(t)}else alert("画像を選択してください")})),$("#viewList").change((function(){"default"===$(this).val()?($("#SMTprof").fadeOut(100),$("#preview").fadeIn(100)):"smart"===$(this).val()&&($("#SMTprof").fadeIn(100),$("#preview").fadeOut(100))})),$("#cropFile1").change((function(t){var n=$(this);if(""!==n){var a=n.prop("files")[0];/\.(jpg|jpeg|png|gif|JPG|JPEG|PNG|GIF)$/.test(a.name)&&/(jpg|jpeg|png|gif)$/.test(a.type)||alert("画像ファイルではありません。再度アップロードしてください。"),$("#textColor").val(i)}else if(window.FileReader){var l=new FileReader;l.onload=function(){$(".crop1").fadeToggle(100);var t=document.getElementById("cropImg1");t.src=a,e=new Cropper(t,{viewMode:3,dragMode:none,minCropBoxWidth:100,minCropBoxHeight:100})},l.readAsDataURL(a)}})),$(".cropBtn1").click((function(){return null!=e&&(img=e.getCroppedCanvas().toDataURL(),$("#image").val("")),!1})),$("#cookieClear").click((function(){return $.removeCookie("name"),$.removeCookie("id"),$.removeCookie("coment"),$.removeCookie("sns"),!1}))}))})),$((function(){var e=$("#snsData");e.html('<div class="input-field col s12"><input type="text" name="formSNS" id="snsText" class="profelem"  maxlength="25" placeholder=""><label for="snsText">SNS情報：</label></div>'),e.hide(),$(".profelem").on({keydown:window.i,chenge:window.i}),$("#snsDataBtn").click((function(){return document.getElementById("snsText")?e.fadeIn:e.fadeOut,i(),!1}))})),$((function(){$("#download").click((function(){var e=$("#name").val();if($("#name, #id, #age, #coment").on("keyup",(function(){$("#name").val()})),null==e||""==e)alert("名前が抜けています。");else{let e=document.getElementById("prof"),t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="prof.png",t.click()}return!1})),$("#windl").click((function(){var e=$("#name").val();if(null===e||""===e)alert("名前が抜けています。");else{var t=document.getElementById("prof"),n=document.createElement("canvas");n.width=1920,n.height=1080;var a=n.getContext("2d"),l=new Image;l.src=t.toDataURL("image/png"),a.drawImage(l,0,0,960,540,0,0,1920,1080),setTimeout((()=>{let e=document.createElement("a");e.href=n.toDataURL("image/png"),e.download="prof-window.png",e.click()}),50)}return!1})),$("#smtdl").click((function(){var e=$("#name").val();if(null===e||""===e)alert("名前が抜けています。");else{var t=document.getElementById("SMTprof");setTimeout((()=>{let e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="prof-smart.png",e.click()}),50)}return!1}))}))})();