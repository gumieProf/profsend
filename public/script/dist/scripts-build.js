(()=>{"use strict";$((function(){"https://profsend.glitch.me/"===location.href&&(location.href="https://profsend.net"),localStorage.getItem("id")&&(l=localStorage.getItem("id"),$("#id").val(l)),localStorage.getItem("name")&&(c=localStorage.getItem("name"),$("#name").val(c)),localStorage.getItem("age")&&(o=localStorage.getItem("age"),$("#age").val(o)),localStorage.getItem("coment")&&(i=localStorage.getItem("coment"),$("#coment").val(i)),localStorage.getItem("sns")&&(r=localStorage.getItem("sns"),$("#sns").val(r)),$("#prof").hide();var e=document.getElementById("prof"),t=document.getElementById("preview"),a=document.getElementById("SMTprof"),n=document.getElementById("SMTpreview"),l=$("#id").val(),o=$("#age").val(),i=$("#coment").val(),r=$("#snsText").val(),c=$("#name").val(),d="/image/img-1.png",m="#999",s="#000000",u=!1,g=!1;setTimeout((function(){$("#scanFile").hide(),$(".datas").hide(),$("#cropFile1").hide(),$(".crop1").hide(),$("#qrValue").hide(),$("#SMTprof").hide(),$("#SMTpreview").hide(),$(".comentDiv2").hide(),$(".comentDiv3").hide(),$(".delete1").click((function(){return $("#name").val(""),i(),!1})),$(".delete2").click((function(){return $("#id").val(""),i(),!1})),$(".delete3").click((function(){return $("#coment").val(""),i(),!1})),$("#data1Btn,.subData1").click((function(){return $(".datas").hide(),$("#data1").fadeIn(),$(".dataBtn").hide(),!1})),$("#data2Btn,.subData2").click((function(){return $(".datas").hide(),$("#data2").fadeIn(),$(".dataBtn").hide(),!1})),$("#data3Btn,.subData3").click((function(){return $(".datas").hide(),$("#data3").fadeIn(),$(".dataBtn").hide(),!1})),$("#data4Btn,.subData4").click((function(){return $(".datas").hide(),$("#data4").fadeIn(),$(".dataBtn").hide(),!1})),$(".back").click((function(){return $(".datas").hide(),$(".dataBtn").show(),!1})),$(".envls").click((function(){var e=$(this).find("img").attr("src");return d=e,i(),!1}));var l=document.getElementById("file");function o(e){if(e.length>30){var t=e.substr(0,10)+"\n",a=e.substr(10,20)+"\n";return e.substr(20,30),t+a+e.substr(30,e.length)}return e.length>20?(t=e.substr(0,10)+"\n")+(a=e.substr(10,20)+"\n")+e.substr(20,e.length):e.length>=10?(t=e.substr(0,10)+"\n")+(a=e.substr(10,e.length)):e}var i=function(){setTimeout((function(){var l=$("#coment").val(),i=o($("#id").val()),r=o($("#age").val()),c=o($("#snsText").val()),u=o($("#name").val()),g=null==l||void 0===l||""==l,f=null==c||void 0===c||""==c,v=null==r||void 0===r||""==r;if(g&&f&&v)var h="名前:\t"+u+"\nID: \t"+i;else h=g&&f?"名前:\t"+u+"\nID: \t"+i+"\n 年齢: \t"+r:v&&f?"名前:\t"+u+"\nID: \t"+i+"\nコメント: \n"+l:v&&g?"名前:\t"+u+"\nID: \t"+i+"\nSNS: \t"+c:v?"名前:\t"+u+"\nID: \t"+i+"\nコメント: \n"+l+"\nSNS: \t"+c:g?"名前:\t"+u+"\nID: \t"+i+"\n 年齢: \t"+r+"\nSNS: \t"+c:f?"名前:\t"+u+"\nID: \t"+i+"\n 年齢: \t"+r+"\nコメント: \n"+l:"名前:\t"+u+"\nID: \t"+i+"\n年齢: \t"+r+"\nコメント: \n"+l+"\nSNS: \t"+c;function I(e,t){var a=e.height,n=e.width,l=e.getContext("2d");if(l.clearRect(0,0,n+100,a+100),l.beginPath(),l.fillStyle=""+m,l.fillRect(0,0,n+100,a+100),l.fillStyle=""+s,l.rect(15,15,n-30,a-30),l.lineWidth=8,l.strokeStyle=s,l.stroke(),"default"===t)var o="50px",i=100,r=.5;else"smt"===t&&(o="25px",i=100,r=.5);l.font="bold "+o+" Boku2";for(var c=h.split("\n"),u=0,g=c.length;g>u;u++){var $=c[u],f=i;u&&(f+=i*r*u),l.fillText($,50,50+f)}var v=new Image;v.src=d;var I=v.height,p=v.width;"/image/img-1.png"===d?"default"===t?l.drawImage(v,n-250,a-250,1.5*p,1.5*I):"smt"===t&&l.drawImage(v,n/3,a/1.5,2*p,2*I):"/image/prof.png"===d?"default"===t?l.drawImage(v,n-300,a-250,p,I):"smt"===t&&l.drawImage(v,n/8,a/1.5,1.5*p,1.5*I):"default"===t?l.drawImage(v,n-250,a-250,p/2,I/2):"smt"===t&&l.drawImage(v,n/3,a/1.5,p/1.5,I/1.5)}I(e,"default"),I(a,"smt"),t.src=e.toDataURL(),n.src=a.toDataURL(),localStorage.setItem("id",$("#id").val()),localStorage.setItem("name",$("#name").val()),localStorage.setItem("age",$("#age").val()),""===!localStorage.setItem("coment",$("#coment").val())&&localStorage.setItem("coment",$("#coment").val()),localStorage.setItem("sns",$("#snsText").val()),localStorage.setItem("image",d)}),100)};$(".EMBreset").click((function(){return d="/image/img-1.png",i(),!1})),$(".EMBhide").click((function(){return d="",i(),!1})),window.i=i,$("#name").val(),$("#id").val(),$("#age").val(),$("#coment").val(),$("#snsText").val(),i(),$(document).on(".profelem,#coment",{keydown:function(e){e.keyCode,i()},chenge:i}),$(document).on({keydown:i,chenge:i},".profelem,#coment"),$("#colors").change((function(){"input"===$(this).val()?($("#colorInputDiv").fadeIn(100),g=!0):"img"===$(this).val()?$("#cropFile1").click():((g=!0)&&($("#colorInputDiv").fadeIn(100),g=!1,$("#colorInput").click()),m=$(this).val()),i()})),$("#textColor").change((function(){"input"===$(this).val()?($("#textInputDiv").fadeIn(100),u=!0):((u=!0)&&(u=!1),s=$(this).val()),i()})),$("#colorInput").change((function(){!0===g&&(m=$(this).val()),i()})),$("#textInput").change((function(){!0===u&&(s=$(this).val()),i()})),$(".qrBtn").click((function(){var e=$("#qrURL").val();return $("#qrValue").empty(),new QRCode("qrValue",{text:e,width:300,height:300,correctLevel:QRCode.CorrectLevel.H}),$("#qrValue").find("img").on("load",(function(){d=$(this).attr("src"),i()})),!1})),l.addEventListener("change",(function(e){var t=e.target.files[0];if(t.type.match("image.*")){var a=new FileReader;a.onload=function(){d=a.result,i()},a.readAsDataURL(t)}else alert("画像を選択してください")})),$("#viewList").change((function(){"default"===$(this).val()?($("#SMTpreview").fadeOut(100),$("#preview").fadeIn(100)):"smart"===$(this).val()&&($("#SMTpreview").fadeIn(100),$("#preview").fadeOut(100))})),$("#cookieClear").click((function(){return localStorage.setItem("id",""),localStorage.setItem("name",""),localStorage.setItem("age",""),localStorage.setItem("coment",""),localStorage.setItem("sns",""),!1}))}))})),$((function(){$("#snsData").html('<input type="text" name="formSNS" id="snsText" class="profelem"  maxlength="25" placeholder=""><label for="snsText">SNS情報：</label>'),$("#snsData").hide(),$(".profelem").on({keydown:window.i,chenge:window.i}),$("#snsDataBtn").click((function(){return $("#snsData").fadeToggle(100),!1}))})),$((function(){$("#download").click((function(){var e=$("#name").val();if($("#name, #id, #age, #coment").on("keyup",(function(){$("#name").val()})),null==e||""==e)alert("名前が抜けています。");else{let e=document.getElementById("prof"),t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="prof.png",t.click()}return!1})),$("#windl").click((function(){var e=$("#name").val();if(null===e||""===e)alert("名前が抜けています。");else{var t=document.getElementById("prof"),a=document.createElement("canvas");a.width=1920,a.height=1080;var n=a.getContext("2d"),l=new Image;l.src=t.toDataURL("image/png"),n.drawImage(l,0,0,960,540,0,0,1920,1080),setTimeout((()=>{let e=document.createElement("a");e.href=a.toDataURL("image/png"),e.download="prof-window.png",e.click()}),50)}return!1})),$("#smtdl").click((function(){var e=$("#name").val();if(null===e||""===e)alert("名前が抜けています。");else{var t=document.getElementById("SMTprof");setTimeout((()=>{let e=document.createElement("a");e.href=t.toDataURL("image/png"),e.download="prof-smart.png",e.click()}),50)}return!1}))}))})();