$(document).ready(function(){var d=35,i=1,r=50,m=50,u=document.getElementById("prof").getContext("2d");(new Image).src=""+pic;var e=document.getElementById("file");u.fillStyle=""+color,u.fillRect(0,0,600,300),u.fillStyle=""+text,u.rect(15,15,470,270),u.lineWidth=8,u.stroke();document.edit.name.value,document.edit.id.value,document.edit.age.value,document.edit.coment.value;function o(){var e="ユーザー名:\t"+document.edit.name.value+"\nID: \t"+document.edit.id.value+"\n 年齢: \t"+document.edit.age.value+"\nコメント: \t"+document.edit.coment.value;u.clearRect(0,0,500,300),u.beginPath(),u.fillStyle=""+color,u.fillRect(0,0,500,300),u.fillStyle=""+text,u.rect(15,15,470,270),u.lineWidth=8,u.stroke(),u.font="bold "+d+"Noto Sans JP";for(var t=e.split("\n"),n=0,o=t.length;n<o;n++){var l=t[n],a=d;n&&(a+=d*i*n),u.fillText(l,r+0,m+a);var c=new Image;c.src=""+pic,u.drawImage(c,250,50,200,200)}}o(),$("#name, #id, #age, #coment").on("keyup",o),$("#name, #id, #age, #coment").on("change",o),$("#colors").change(function(){color=$(this).val(),$("body").css({border:"10px solid"+color}),$(".button").css({"background-color":""+color}),o()}),e.addEventListener("change",function(e){var t=e.target.files[0];if(t.type.match("image.*")){var n=new FileReader;n.onload=function(){pic=n.result,o()},n.readAsDataURL(t)}else alert("画像を選択してください")},!1),$("#download").click(function(){var e=document.getElementById("prof"),t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="profsend.png",t.click()})});